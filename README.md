
![png](https://img.shields.io/badge/Python-3.6+-green)
![png](https://img.shields.io/badge/amazeui+-blue)

  
### 🎉 技术栈

- [x] 🎶 SQLAlchemy
- [x] 🎉 Apscheduler(定时任务框架) 
- [x] 🎃 mocker服务 
- [x] 🔒 Redis
- [x] 🔒 SSH连接工具


### ⚽ 平台功能


#### 用户管理

![图片](https://user-images.githubusercontent.com/116870381/212624781-fe31ef6c-801e-485a-a4fd-94db80e645e8.png)

#### 角色管理
![图片](https://user-images.githubusercontent.com/116870381/212625131-afabf8ae-003f-4778-b12c-b2b51a24b837.png)

#### HTTP测试
![图片](https://user-images.githubusercontent.com/116870381/212628282-65051c4a-5559-45ba-92d2-1b68c72ca152.png)
#### 用例库
![图片](https://user-images.githubusercontent.com/116870381/212629139-2ae349e4-fb85-4592-8ac1-c8d24c799a0e.png)

#### 项目管理
![图片](https://user-images.githubusercontent.com/116870381/212630490-fe0c29f7-602f-444b-b353-76a3e2257249.png)

##### 项目管理--测试用例
![图片](https://user-images.githubusercontent.com/116870381/212631026-dfba3f54-41d4-4e6b-af7e-f625cf8a16b6.png)
##### 项目管理--编辑项目
![图片](https://user-images.githubusercontent.com/116870381/212631131-cfb489dd-ea1c-4170-9605-f24f5f960184.png)

##### 项目管理--成员管理
![图片](https://user-images.githubusercontent.com/116870381/212631535-22e1e15d-3b68-4d7a-8df4-7507c2712b9a.png)

#### 数据库管理客户端
![图片](https://user-images.githubusercontent.com/116870381/212631623-b68a6a70-6f4c-4c97-9513-ee642e953d9f.png)

#### ssh客户端
![图片](https://user-images.githubusercontent.com/116870381/212636727-d7485733-824b-425e-acdf-11657988e682.png)
##### ssh客户端--连接客户端
![图片](https://user-images.githubusercontent.com/116870381/212637573-ad801b09-d77a-4275-b739-9ce133bdd5a9.png)

#### mock服务
![图片](https://user-images.githubusercontent.com/116870381/212638035-9b5674ff-d663-436e-8e70-08b32c6fc313.png)

#### 定时任务
![图片](https://user-images.githubusercontent.com/116870381/212646100-3dd99bf4-59e9-4341-b9c2-744e3b17c50d.png)

#### 任务中心
![图片](https://user-images.githubusercontent.com/116870381/212646476-809db0f5-eb4b-4271-9eac-94f31463befd.png)

##### 任务中心--查看任务
![图片](https://user-images.githubusercontent.com/116870381/212647116-b0528b5a-e978-48cc-8505-357b08b73da0.png)


## ☕ 说明

这是一个具备完整`开发手册`(开发手册，手把手教那种)，严格按照`写一块内容`，`补一篇文章`的形式创作而成，其中也经历了从`Flask`到`FastApi`
的快速过渡。也许代码质量没有很高，但是对于新人来说，跟着一步一步，不但可以完成从`接口自动化框架`到`接口自动化平台`的转变，还能从中看到作者不断优化的过程。

如果你也想从0到1开始打造一个测试平台，那`pity`将是你不二的选择。话不多说，赶快开始体验吧！靓仔靓女们~

<details open="open">
<summary>火热开发中</summary>

| 功能点      | 敬请期待             |
|:---------|:-----------------|
| 数据工厂     | 🍔🍔🍔🍔         |
| Locust结合 | 🍔🍔🍔🍔🍔 |
| Mock     | 🍔             |

</details>


[在线体验 🍍](https://pity.fun/)

<details open="open">
<summary>🌙 已有功能</summary>

| 功能点            | 状态  |
|:---------------|:----|
| 精美的邮件/钉钉通知模板   | ✅  |
| 用例录制生成 🔥      | ✅   |
| har导入 🔥       | ✅   |
| http测试         | ✅   |
| 测试集合           | ✅   |
| 定时任务           | ✅   |
| 全局变量           | ✅   |
| 自定义脚本          | ✅   |
| 场景测试           | ✅   |
| 后台管理           | ✅   |
| 文件上传测试         | ✅   |
| 在线SQL          | ✅   |
| 在线Redis        | ✅   |
| 测试报告           | ✅   |
| 项目管理           | ✅   |
| 权限系统           | ✅   |
| 串行/并行执行用例      | ✅   |
| 参数提取           | ✅   |

</details>

### 🚚 即将到来

| 功能点          | 敬请期待 |
|:-------------|:-----|
| CI/CD        | 🎉🎉🎉   |
| HttpRunner支持 | 🎉🎉🎉   |
| 数据工厂         | 🎉🎉🎉   |
| 精准测试         | 🎉🎉🎉   |
| 组织架构         | 🎉🎉🎉   |
| 用例评分         | 🎉🎉🎉   |

<details>
<summary>平台预览(点击可展开)</summary>

#### 🍦 工作台

![](https://static.pity.fun/picture/2022-2-28/1646063228180-image.png)

#### 测试计划

![](https://static.pity.fun/picture/2022-2-25/1645803999678-image.png)

#### 测试报告

![](https://static.pity.fun/picture/2022-2-25/1645804075353-image.png)

#### 测试用例

![](https://static.pity.fun/picture/2022-2-25/1645804276470-image.png)

#### 钉钉通知

![](https://static.pity.fun/picture/20220813173821.png)


#### SQL客户端

![](https://static.pity.fun/picture/2022-2-25/1645804151559-image.png)

#### 项目管理

![项目管理](https://static.pity.fun/picture/2022-2-26/1645854332681-image.png)

</details>

## ✉ 使用文档

[使用文档(github)](https://wuranxu.github.io/pityDoc/)

[备用地址(gitee)](https://woodywrx.gitee.io/pityDoc/)

## 😊 开发参考文章

[开发文档-公众号](https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzIyMjUwOTk5Mw==&action=getalbum&album_id=1983195471686762500&scene=173&from_msgid=2247484522&from_itemidx=8&count=3&nolastread=1#wechat_redirect)

[开发文档-掘金](https://juejin.cn/column/6977933898952998926)

### 😢 关于Pity平台

pity是一款专注于api自动化的工具，采用`Python`+`FastApi`+`React`开发，目前还不能作为生产级别的工具，作者正在努力之中。

这个项目叫pity，一个从0开始写的自动化测试平台(基于FastApi)，旨在总结自己最近几年的工作经验，也顺便帮助大家进步。目前还在火热更新中，基本上每周都会更新几篇吧，前期以教学+编码为主，后期以实现功能为主。希望大家能够喜欢！~

项目起源是本人很期待的某家公司🐧拒绝了我，觉得特别遗憾吧😅。加上这一年`浑浑噩噩`的，也没有什么产出，做的东西不如18，19年多。所以打算把自己18-19的项目重写出来，给大家一些参考。

### Docker部署

1. 安装Docker Desktop
2. 打开终端并进入pity目录
3. 执行以下命令，安静等待pity启动即可（不需要额外安装mysql redis等，一键启动直接起飞）

  **docker镜像由卫衣哥（QYZHG倾情制作👏👏👏）**

```bash
docker-compose -f .\ops\docker-compose.yaml up
```

### 🎉 二次开发

1. 拉取代码

```bash
$ git clone https://github.com/wuranxu/pity
$ cd pity
```

2. 安装依赖

```bash
# 可换豆瓣源或者清华源安装依赖
$ pip install -r requirements.txt
```

3. 安装并启动redis

4. 安装并启动mysql

5. 修改conf/dev.env

修改其中mysql和redis连接信息，redis虽然可以不开启，但是会导致`定时任务重复执行`（基于redis实现了分布式锁）。

6. 启动服务

```bash
$ python pity.py
```

7. 注册用户

打开浏览器输入: `http://localhost:7777`进入登录页。

点击注册按钮，第一个注册的用户会成为`超级管理员`，拥有一切权限。

![](https://static.pity.fun/picture%2F%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220504235808.png)

登录后就可以开启pity之旅啦！


### 💪 落地效果

可能有人会怀疑项目是否能真正运用到生产系统里，这款工具其实是我在某大型共享单车公司实践2年多的一款工具。之前是golang开发，如今我离开那家公司，打算保留原本功能的基础之上进一步优化，并新增更多丰富的特性。所以大家可以放心，它绝对是一款能方便解决你api自动化测试的利器。

### 😊 已有功能

+ [x] 🔥 完善的用户登录/注册机制，提供第三方(github)登录
- [x] 🀄 完善的项目管理机制
* [x] 🚴 结合FastApi，利用asyncio让Python代码也可以起飞
- [x] 💎 完整的接口测试流程
- [x] 📝 强大的数据构造器, 解决接口数据依赖问题
- [x] 🎨 在线调试http请求，堪比网页版本postman
- [x] 🍷 完善的全局变量机制，拒绝case中的死数据
- [x] 🚀 速度还挺快的
- [x] 🐍 在线redis请求
- [x] 🐎 测试计划/集合
- [x] 🙈 在线数据库ide，数据库管理功能
- [x] 📰 漂亮的邮件通知
- [x] 😹 定时构建测试用例
- [x] 🐧 精美的测试报告展示页面

## 🙋 待开发的功能

- [ ] 💀 app管理功能，支持app的导入和导出

* [ ] 😼 ~~代码覆盖率增量/全量统计功能~~

- [ ] 🐘 微服务化
- [ ] 🐄 数据工厂，强大的造数功能
- [ ] 🐸 用例支持har，jmx等格式导入
- [ ] 👍 CI/CD，类pipeline功能
- [ ] 🌼 推送功能，支持钉钉/企信推送
- [ ] 🌛 支持dubbo/grpc
- [ ] 🐛 打通yapi
- [ ] 🌽 等等等等
